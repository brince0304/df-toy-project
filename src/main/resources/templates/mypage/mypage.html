<!DOCTYPE html>
<html lang="ko">
<head>
    <link th:href="@{/Login/assets/css/bootstrap.css}" rel="stylesheet"/>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link th:href="@{/Login/assets/css/login-register.css}" rel="stylesheet"/>
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,700" rel="stylesheet">

    <link rel="stylesheet" href="/header/fonts/icomoon/style.css">

    <link rel="stylesheet" href="/header/css/owl.carousel.min.css">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="/header/css/bootstrap.min.css">
    <!-- Style -->
    <link rel="stylesheet" href="/header/css/style.css">
    <link rel="stylesheet" href="http://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css">
    <script th:src="@{/Login/assets/js/jquery-1.10.2.js}" type="text/javascript"></script>
    <script th:src="@{/Login/assets/js/bootstrap.js}" type="text/javascript"></script>
    <script th:src="@{/Login/assets/js/login-register.js}" type="text/javascript"></script>
    <link rel='stylesheet' href='https://use.fontawesome.com/releases/v5.3.1/css/all.css'>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi" crossorigin="anonymous">
    <title>Title</title>
    <style>
        body {
            margin-top: 20px;
            background: #eee;
        }

        .single_advisor_profile {
            position: relative;
            margin-bottom: 50px;
            -webkit-transition-duration: 500ms;
            transition-duration: 500ms;
            z-index: 1;
            border-radius: 15px;
            -webkit-box-shadow: 0 0.25rem 1rem 0 rgba(47, 91, 234, 0.125);
            box-shadow: 0 0.25rem 1rem 0 rgba(47, 91, 234, 0.125);
        }

        .single_advisor_profile .advisor_thumb {
            position: relative;
            z-index: 1;
            border-radius: 15px 15px 0 0;
            margin: 0 auto;
            padding: 30px 30px 0 30px;
            background-color: transparent;
            overflow: hidden;
        }

        .single_advisor_profile .advisor_thumb::after {
            -webkit-transition-duration: 500ms;
            transition-duration: 500ms;
            position: absolute;
            width: 150%;
            height: 80px;
            bottom: -45px;
            left: -25%;
            content: "";
            background-color: #ffffff;
            -webkit-transform: rotate(-15deg);
            transform: rotate(-15deg);
        }

        @media only screen and (max-width: 575px) {
            .single_advisor_profile .advisor_thumb::after {
                height: 160px;
                bottom: -90px;
            }
        }

        .single_advisor_profile .advisor_thumb .social-info {
            position: absolute;
            z-index: 1;
            width: 100%;
            bottom: 0;
            right: 30px;
            text-align: right;
        }

        .single_advisor_profile .advisor_thumb .social-info a {
            font-size: 14px;
            color: #020710;
            padding: 0 5px;
        }

        .single_advisor_profile .advisor_thumb .social-info a:hover,
        .single_advisor_profile .advisor_thumb .social-info a:focus {
            color: transparent;
        }

        .single_advisor_profile .advisor_thumb .social-info a:last-child {
            padding-right: 0;
        }

        .single_advisor_profile .single_advisor_details_info {
            position: relative;
            z-index: 1;
            padding: 30px;
            text-align: right;
            -webkit-transition-duration: 500ms;
            transition-duration: 500ms;
            border-radius: 0 0 15px 15px;
            background-color: #ffffff;
        }

        .single_advisor_profile .single_advisor_details_info::after {
            -webkit-transition-duration: 500ms;
            transition-duration: 500ms;
            position: absolute;
            z-index: 1;
            width: 50px;
            height: 3px;
            background-color: transparent;
            content: "";
            top: 12px;
            right: 30px;
        }

        .single_advisor_profile .single_advisor_details_info h6 {
            margin-bottom: 0.25rem;
            -webkit-transition-duration: 500ms;
            transition-duration: 500ms;
        }

        @media only screen and (min-width: 768px) and (max-width: 991px) {
            .single_advisor_profile .single_advisor_details_info h6 {
                font-size: 14px;
            }
        }

        .single_advisor_profile .single_advisor_details_info p {
            -webkit-transition-duration: 500ms;
            transition-duration: 500ms;
            margin-bottom: 0;
            font-size: 14px;
        }

        @media only screen and (min-width: 768px) and (max-width: 991px) {
            .single_advisor_profile .single_advisor_details_info p {
                font-size: 12px;
            }
        }

        .single_advisor_profile:hover .advisor_thumb::after,
        .single_advisor_profile:focus .advisor_thumb::after {
            background-color: transparent;
        }

        .single_advisor_profile:hover .advisor_thumb .social-info a,
        .single_advisor_profile:focus .advisor_thumb .social-info a {
            color: #ffffff;
        }

        .single_advisor_profile:hover .advisor_thumb .social-info a:hover,
        .single_advisor_profile:hover .advisor_thumb .social-info a:focus,
        .single_advisor_profile:focus .advisor_thumb .social-info a:hover,
        .single_advisor_profile:focus .advisor_thumb .social-info a:focus {
            color: #ffffff;
        }

        .single_advisor_profile:hover .single_advisor_details_info,
        .single_advisor_profile:focus .single_advisor_details_info {
            background-color: silver;
        }

        .single_advisor_profile:hover .single_advisor_details_info::after,
        .single_advisor_profile:focus .single_advisor_details_info::after {
            background-color: #ffffff;
        }

        .single_advisor_profile:hover .single_advisor_details_info h6,
        .single_advisor_profile:focus .single_advisor_details_info h6 {
            color: #ffffff;
        }

        .single_advisor_profile:hover .single_advisor_details_info p,
        .single_advisor_profile:focus .single_advisor_details_info p {
            color: #ffffff;
        }

        .widget-26 {
            color: #3c4142;
            font-weight: 400;
        }

        .widget-26 tr:first-child td {
            border: 0;
        }

        .widget-26 .widget-26-job-emp-img img {
            width: 35px;
            height: 35px;
            border-radius: 50%;
        }

        .widget-26 .widget-26-job-title {
            min-width: 200px;
        }

        .widget-26 .widget-26-job-title a {
            font-weight: 400;
            font-size: 0.875rem;
            color: #3c4142;
            line-height: 1.5;
        }

        .widget-26 .widget-26-job-title a:hover {
            color: #68CBD7;
            text-decoration: none;
        }

        .widget-26 .widget-26-job-title .employer-name {
            margin: 0;
            line-height: 1.5;
            font-weight: 400;
            color: #3c4142;
            font-size: 0.8125rem;
            color: #3c4142;
        }

        .widget-26 .widget-26-job-title .employer-name:hover {
            color: #68CBD7;
            text-decoration: none;
        }

        .widget-26 .widget-26-job-title .time {
            font-size: 12px;
            font-weight: 400;
        }

        .widget-26 .widget-26-job-info {
            min-width: 100px;
            font-weight: 400;
        }

        .widget-26 .widget-26-job-info p {
            line-height: 1.5;
            color: #3c4142;
            font-size: 0.8125rem;
        }

        .widget-26 .widget-26-job-info .location {
            color: #3c4142;
        }

        .widget-26 .widget-26-job-salary {
            min-width: 70px;
            font-weight: 400;
            color: #3c4142;
            font-size: 0.8125rem;
        }

        .widget-26 .widget-26-job-category {
            padding: .5rem;
            display: inline-flex;
            white-space: nowrap;
            border-radius: 15px;
        }

        .widget-26 .widget-26-job-category .indicator {
            width: 13px;
            height: 13px;
            margin-right: .5rem;
            float: left;
            border-radius: 50%;
        }

        .widget-26 .widget-26-job-category span {
            font-size: 0.8125rem;
            color: #3c4142;
            font-weight: 600;
        }

        .widget-26 .widget-26-job-starred svg {
            width: 20px;
            height: 20px;
            color: #fd8b2c;
        }

        .widget-26 .widget-26-job-starred svg.starred {
            fill: #fd8b2c;
        }

        .bg-soft-base {
            background-color: #e1f5f7;
        }

        .bg-soft-warning {
            background-color: #fff4e1;
        }

        .bg-soft-success {
            background-color: #d1f6f2;
        }

        .bg-soft-danger {
            background-color: #fedce0;
        }

        .bg-soft-info {
            background-color: #d7efff;
        }


        .search-form {
            width: 80%;
            margin: 0 auto;
            margin-top: 1rem;
        }

        .search-form input {
            height: 100%;
            background: transparent;
            border: 0;
            display: block;
            width: 100%;
            padding: 1rem;
            height: 100%;
            font-size: 1rem;
        }

        .search-form select {
            background: transparent;
            border: 0;
            padding: 1rem;
            height: 100%;
            font-size: 1rem;
        }

        .search-form select:focus {
            border: 0;
        }

        .search-form button {
            height: 100%;
            width: 100%;
            font-size: 1rem;
        }

        .search-form button svg {
            width: 24px;
            height: 24px;
        }

        .search-body {
            margin-bottom: 1.5rem;
        }

        .search-body .search-filters .filter-list {
            margin-bottom: 1.3rem;
        }

        .search-body .search-filters .filter-list .title {
            color: #3c4142;
            margin-bottom: 1rem;
        }

        .search-body .search-filters .filter-list .filter-text {
            color: #727686;
        }

        .search-body .search-result .result-header {
            margin-bottom: 2rem;
        }

        .search-body .search-result .result-header .records {
            color: #3c4142;
        }

        .search-body .search-result .result-header .result-actions {
            text-align: right;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .search-body .search-result .result-header .result-actions .result-sorting {
            display: flex;
            align-items: center;
        }

        .search-body .search-result .result-header .result-actions .result-sorting span {
            flex-shrink: 0;
            font-size: 0.8125rem;
        }

        .search-body .search-result .result-header .result-actions .result-sorting select {
            color: #68CBD7;
        }

        .search-body .search-result .result-header .result-actions .result-sorting select option {
            color: #3c4142;
        }

        @media (min-width: 768px) and (max-width: 991.98px) {
            .search-body .search-filters {
                display: flex;
            }

            .search-body .search-filters .filter-list {
                margin-right: 1rem;
            }
        }

        .card-margin {
            margin-bottom: 1.875rem;
        }

        @media (min-width: 992px) {
            .col-lg-2 {
                flex: 0 0 16.66667%;
                max-width: 16.66667%;
            }
        }

        .card-margin {
            margin-bottom: 1.875rem;
        }

        .card {
            border: 0;
            box-shadow: 0px 0px 10px 0px rgba(82, 63, 105, 0.1);
            -webkit-box-shadow: 0px 0px 10px 0px rgba(82, 63, 105, 0.1);
            -moz-box-shadow: 0px 0px 10px 0px rgba(82, 63, 105, 0.1);
            -ms-box-shadow: 0px 0px 10px 0px rgba(82, 63, 105, 0.1);
        }

        .card {
            position: relative;
            display: flex;
            flex-direction: column;
            min-width: 0;
            word-wrap: break-word;
            background-color: #ffffff;
            background-clip: border-box;
            border: 1px solid #e6e4e9;
            border-radius: 8px;
        }


        #star {
            margin-left: -5px !important;
            vertical-align: bottom !important;
            opacity: 0.5;
        }


        .more {
            opacity: 0.5 !important;
        }

        .btn:hover {
            color: black !important;
        }

        .vl {
            margin: 8px !important;
            width: 2px;
            border-right: 1px solid #aaaaaa;
            height: 25px;
        }


        #plus {
            opacity: 0.8;
        }


        .card {
            border-radius: 10px !important;
        }

        a:hover {
            background-color: #ccc !important;
        }


        .btn-outlined:active {
            color: #FFF;
            border-color: #fff !important;
        }


        img {

            cursor: pointer;
            overflow: visible;
        }

        .btn:focus,
        .btn:active {
            outline: none !important;
            box-shadow: none !important;
        }



    </style>
</head>
<body>
<header id="header">
    헤더
</header>
<div class="container" style="margin-top : 92px">
    <div class="card mt-5 border-5 pt-2 active pb-0 px-3">
        <div class="card-body ">
            <div class="row">
                <div class="col-12 ">
                    <h4 class="card-title "><b th:text="${user.getNickname()} +'님'">Program Title</b></h4>

                </div>
                <div class="col">
                    <h6 class="card-subtitle mb-2 text-muted">
                        <p class="card-text text-muted small ">
                            <img src="https://img.icons8.com/metro/26/000000/star.png" class="mr-1 " width="19"
                                 height="19" id="star"> <span class="vl mr-2 ml-0"></span>

                            Created by <span class="font-weight-bold"> BBBootstrap Team</span> on 1 Nov , 2018</p>
                    </h6>
                </div>
            </div>

        </div>

        <div class="card-footer bg-white px-0 ">
            <div class="row">

                <div class=" col-md-auto ">
                    <a class="btn btn-outlined btn-black text-muted bg-transparent"
                       data-wow-delay="0.7s" data-toggle="modal" href="#"
                       data-target="#detailModifyModal"><img src="https://img.icons8.com/ios/50/000000/settings.png"
                                                             width="19" height="19"> <small>정보 수정</small></a>

                    <i class="mdi mdi-settings-outline"></i>


                    <a href="#" class="
                         btn-outlined btn-black text-muted"><img src="https://img.icons8.com/metro/26/000000/link.png"
                                                                 width="20" height="20" id="plus">
                        <small>캐릭터 등록</small> </a>


                    <a href="#" class="btn btn-outlined btn-black text-muted "><img
                            src="https://img.icons8.com/metro/26/000000/more.png" width="20" height="20"
                            class="mr-2 more"><small>활동 내역</small></a>
                    <span class="vl ml-3"></span>
                </div>

                <div class="col-md-auto ">
                    <ul class="list-inline">
                        <li class="list-inline-item"><a data-toggle="modal"
                                                        data-target="#iconSelectModal" href="#" class="
                         btn-outlined btn-black text-muted"> <img
                                th:src="@{/api/getFile.df(name=${user.getProfileIcon().getFileName()})}" src=""
                                alt="DP" class="  rounded-circle img-fluid " width="35" height="35"> <img
                                th:src="@{/images/icons/modify_icon.png}" src=""
                                width="30" height="30 " class="more"><small>프로필 아이콘 변경</small> </a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-12">
            <div class="card card-margin">
                <div class="card-body">
                    <div class="row search-body">
                        <div class="col-lg-12">
                            <div class="search-result">
                                <div class="result-body">
                                    <div class="table-responsive">
                                        <div class="container">
                                            <div class="row">
                                                <!-- Single Advisor-->
                                                <div th:each="char : ${characters}" class="col-12 col-sm-6 col-lg-3">
                                                    <div class="single_advisor_profile wow fadeInUp"
                                                         data-wow-delay="0.2s"
                                                         style="visibility: visible; animation-delay: 0.2s; animation-name: fadeInUp;">
                                                        <!-- Team Thumb-->
                                                        <div class="advisor_thumb"><span
                                                                th:if="${char.getCharacterAbilityDTO().adventureFame!=null && char.getCharacterAbilityDTO().adventureFame!='0' }"
                                                                style="vertical-align: top ; align-content: end"
                                                                th:text="'모험가 명성: '+ ${char.characterAbilityDTO.adventureFame}"></span>
                                                            <img src=""
                                                                 th:src="@{'https://img-api.neople.co.kr/df/servers/'+${char.serverId}+'/characters/' + ${char.characterId} + '?zoom=1'}"
                                                                 alt="캐릭터 이미지"/>
                                                            <!-- Social Info-->
                                                            <div class="social-info"><a href="#"><i
                                                                    class="fa fa-facebook"></i></a><a href="#"><i
                                                                    class="fa fa-twitter"></i></a><a href="#"><i
                                                                    class="fa fa-linkedin"></i></a></div>
                                                        </div>
                                                        <!-- Team Details-->
                                                        <div class="single_advisor_details_info">
                                                            <h6 th:text="${char.characterAbilityDTO.characterName}">
                                                                Samantha Sarah</h6>
                                                            <p class="designation" style="color: black"
                                                               th:text="${char.characterAbilityDTO.adventureName}">
                                                                Founder &amp; CEO</p>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <nav id="pagination" aria-label="Page navigation">
                                                <ul class="pagination justify-content-center">
                                                    <li class="page-item"><a class="page-link" href="#">Previous</a>
                                                    </li>
                                                    <li class="page-item"><a class="page-link" href="#">1</a></li>
                                                    <li class="page-item"><a class="page-link" href="#">Next</a></li>
                                                </ul>
                                            </nav>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </div>

    <div class="modal fade login" id="detailModifyModal" data-backdrop="false" style="  position: fixed;
  top:0; left: 0; bottom: 0; right: 0;
  background: rgba(0, 0, 0, 0.8);">
        <div class="modal-dialog login animated">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true" id="closeButton"><img
                            src="/header/images/close.png" alt="닫기" style="width:20px ; height:20px"></button>
                    <h4 style="text-align:left">회원 정보를 수정합니다!</h4>
                </div>
                <div class="modal-body">
                    <div class="box">
                        <div class="content">
                            <h4 style="text-align:left">원하는 정보를 수정해주세요!</h4>
                            <div class="form">
                                <form html="{:multipart=>true}" data-remote="true" action="" accept-charset="UTF-8">
                                    <input id="nicknameUpdate" class="input-lg form-control" type="text"
                                           placeholder="닉네임" name="nickname">
                                    <div class="row">
                                        <div class="col-sm-12">
                                            <span id="nicknameCheck" class="glyphicon glyphicon-remove"
                                                  style="color:#FF0004;"></span> 닉네임 중복확인
                                        </div>
                                    </div>
                                    <input id="emailUpdate" class="input-lg form-control" type="email"
                                           placeholder="이메일" name="email">
                                    <div class="row">
                                        <div class="col-sm-12">
                                            <span id="emailCheck" class="glyphicon glyphicon-remove"
                                                  style="color:#FF0004;"></span> 이메일 중복확인
                                        </div>
                                    </div>
                                    <input type="password" class="input-lg form-control" name="password1Update" id="password1Update"
                                           placeholder="New Password" autocomplete="off">
                                    <div class="row">
                                        <div class="col-sm-6">
                                            <span id="8char" class="glyphicon glyphicon-remove"
                                                  style="color:#FF0004;"></span> 8자 이상<br>
                                            <span id="ucase" class="glyphicon glyphicon-remove"
                                                  style="color:#FF0004;"></span> 대문자 포함
                                        </div>
                                        <div class="col-sm-6">
                                            <span id="lcase" class="glyphicon glyphicon-remove"
                                                  style="color:#FF0004;"></span> 소문자 포함<br>
                                            <span id="num" class="glyphicon glyphicon-remove"
                                                  style="color:#FF0004;"></span> 숫자 포함
                                        </div>
                                    </div>
                                    <input type="password" class="input-lg form-control" name="password2Update" id="password2Update"
                                           placeholder="Repeat Password" autocomplete="off">
                                    <div class="row">
                                        <div class="col-sm-12">
                                            <span id="pwmatch" class="glyphicon glyphicon-remove"
                                                  style="color:#FF0004;"></span> 비밀번호 확인
                                        </div>
                                    </div>
                                    <br>
                                    <input class="btn btn-default btn-register" type="button" onclick="registerSubmit()"
                                           value="정보 수정" name="commit">
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade login" id="iconSelectModal" data-backdrop="false" style="  position: fixed;
  top:0; left: 0; bottom: 0; right: 0;
  background: rgba(0, 0, 0, 0.8);">
        <div class="modal-dialog login animated">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true" id="closeButton"><img
                            src="/header/images/close.png" alt="닫기" style="width:20px ; height:20px"></button>
                    <h4 style="text-align:left">아이콘을 변경합니다!</h4>
                </div>
                <div class="modal-body">
                    <div class="box">
                        <div class="content">
                            <h4  style="text-align: center">원하는 아이콘을 선택해주세요!</h4>
                            <div class="form">
                                <a class="btn-outlined btn-black text-muted" href="#" onclick="changeProfileIcon(0)"> <img
                                        th:src="@{/images/icon_char/icon_char_0.png}" src=""
                                        alt="DP" class="  rounded-circle img-fluid " width="35" height="35"></a>
                                <a class="btn-outlined btn-black text-muted" href="#" onclick="changeProfileIcon(1)"> <img
                                        th:src="@{/images/icon_char/icon_char_1.png}" src=""
                                        alt="DP" class="  rounded-circle img-fluid " width="35" height="35"></a>
                                <a class="btn-outlined btn-black text-muted" href="#" onclick="changeProfileIcon(2)"> <img
                                        th:src="@{/images/icon_char/icon_char_2.png}" src=""
                                        alt="DP" class="  rounded-circle img-fluid " width="35" height="35"></a>
                                <a class="btn-outlined btn-black text-muted" href="#" onclick="changeProfileIcon(3)"> <img
                                        th:src="@{/images/icon_char/icon_char_3.png}" src=""
                                        alt="DP" class="  rounded-circle img-fluid " width="35" height="35"></a>
                                <a class="btn-outlined btn-black text-muted" href="#" onclick="changeProfileIcon(4)"> <img
                                        th:src="@{/images/icon_char/icon_char_4.png}" src=""
                                        alt="DP" class="  rounded-circle img-fluid " width="35" height="35"></a>
                                <a class="btn-outlined btn-black text-muted" href="#" onclick="changeProfileIcon(5)"> <img
                                        th:src="@{/images/icon_char/icon_char_5.png}" src=""
                                        alt="DP" class="  rounded-circle img-fluid " width="35" height="35"></a>
                                <a class="btn-outlined btn-black text-muted" href="#" onclick="changeProfileIcon(6)"> <img
                                        th:src="@{/images/icon_char/icon_char_6.png}" src=""
                                        alt="DP" class="  rounded-circle img-fluid " width="35" height="35"></a>

                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
    <footer id="footer">
        푸터
    </footer>
    <script src="/header/js/jquery.sticky.js"></script>
    <script src="/header/js/main.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.1.js"></script>
    <!-- Popper JS -->
    <script src='https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js'></script>
    <!-- Bootstrap JS -->
    <script src='https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js'></script>
    <script th:href="@{/js/scriptfile.js}"></script>
</body>
<script>
    function changeProfileIcon(number){
        if(confirm("아이콘을 변경하시겠습니까?")){
            const iconName = "icon_char_" + number+".png";
            $.ajax({
                url: "/api/user/profile.df?profileIcon="+iconName,
                type: "PUT",
                data: {
                    iconNumber: number
                },
                success: function (data) {

                        alert("아이콘 변경이 완료되었습니다.");
                        location.reload();
                },
                error: function (request, status, error) {
                    alert("code:" + request.status + "\n" + "message:" + request.responseText + "\n" + "error:" + error);
                }
            });
        }else{
            return;
        }
    }

    // Mobile Navigation
    if ($('#nav-menu-container').length) {
        var $mobile_nav = $('#nav-menu-container').clone().prop({
            id: 'mobile-nav'
        });
        $mobile_nav.find('> ul').attr({
            'class': '',
            'id': ''
        });
        $('body').append($mobile_nav);
        $('body').prepend('<button type="button" id="mobile-nav-toggle"><i class="fa fa-bars"></i></button>');
        $('body').append('<div id="mobile-body-overly"></div>');
        $('#mobile-nav').find('.menu-has-children').prepend('<i class="fa fa-chevron-down"></i>');

        $(document).on('click', '.menu-has-children i', function(e) {
            $(this).next().toggleClass('menu-item-active');
            $(this).nextAll('ul').eq(0).slideToggle();
            $(this).toggleClass("fa-chevron-up fa-chevron-down");
        });

        $(document).on('click', '#mobile-nav-toggle', function(e) {
            $('body').toggleClass('mobile-nav-active');
            $('#mobile-nav-toggle i').toggleClass('fa-times fa-bars');
            $('#mobile-body-overly').toggle();
        });

        $(document).click(function(e) {
            var container = $("#mobile-nav, #mobile-nav-toggle");
            if (!container.is(e.target) && container.has(e.target).length === 0) {
                if ($('body').hasClass('mobile-nav-active')) {
                    $('body').removeClass('mobile-nav-active');
                    $('#mobile-nav-toggle i').toggleClass('fa-times fa-bars');
                    $('#mobile-body-overly').fadeOut();
                }
            }
        });
    } else if ($("#mobile-nav, #mobile-nav-toggle").length) {
        $("#mobile-nav, #mobile-nav-toggle").hide();
    }

    // Smooth scroll for the menu and links with .scrollto classes
    $('.nav-menu a, #mobile-nav a, .scrollto').on('click', function() {
        if (location.pathname.replace(/^\//, '') == this.pathname.replace(/^\//, '') && location.hostname == this.hostname) {
            var target = $(this.hash);
            if (target.length) {
                var top_space = 0;

                if ($('#header').length) {
                    top_space = $('#header').outerHeight();

                    if( ! $('#header').hasClass('header-fixed') ) {
                        top_space = top_space - 20;
                    }
                }

                $('html, body').animate({
                    scrollTop: target.offset().top - top_space
                }, 1500, 'easeInOutExpo');

                if ($(this).parents('.nav-menu').length) {
                    $('.nav-menu .menu-active').removeClass('menu-active');
                    $(this).closest('li').addClass('menu-active');
                }

                if ($('body').hasClass('mobile-nav-active')) {
                    $('body').removeClass('mobile-nav-active');
                    $('#mobile-nav-toggle i').toggleClass('fa-times fa-bars');
                    $('#mobile-body-overly').fadeOut();
                }
                return false;
            }
        }
    });
</script>
</html>